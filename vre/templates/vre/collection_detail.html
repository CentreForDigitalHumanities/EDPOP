{% extends "vre/base.html" %}
{% block content %}
<div class="container-fluid">
    <h1>{{ collection.description}}</h1>
    <h2> Search CERL HPB to add items </h2>

    <form method="POST" id="search">
    {% csrf_token %}
    <input type="text" name="search" size="30"> <br> <br>
    <input type="submit" value="Search">
    </form>

    {% if result_list %}
    <form method="POST" id="select_records">
        {% csrf_token %}
        <input type="submit" value="Add">
        <table class="table table-striped">
        {% for result, result_json in result_list %}
            <tr>
                <td>
                    <input type="checkbox" id="{{forloop.counter0}}" data-content="{{result_json}}" value={{forloop.counter0}}>
                </td>
                <td>
                    {% for field in result.selected_fields %}
                        {% if field.primary %}
                            <a id="field.name" href="javascript:show_detail()">{{ field.value }} </a>
                        {% else %}
                            {{ field.name }}: {{ field.value }}
                    {% endif %}
                    {%  endfor %}
                </td>
            </tr>
        {% endfor %}
        </table>

    </form>
{% endif %}
</div>

<div class="panel panel-default" id="result_detail">
    <div class="panel-head">
        <b> {{ result.datafields.uri }} </b>
        <button>Add to {{collection.description}}</button>
        <button id="close_panel"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
    </div>
    <div class="panel-body">
        {% for field, value in result.datafields.items %}
            {% if field is not 'uri' %}
                <p>{{ field }}: {{ value }}</p>
            {% endif %}
        {%  endfor %}
    </div>
</div>
{% endblock content %}
